(this["webpackJsonppart-placer"]=this["webpackJsonppart-placer"]||[]).push([[6],{263:function(e,t,a){var n=a(264),r=["pack"];e.exports=function(){var e=new Worker(a.p+"649eb75d772d9c025db7.worker.js",{name:"[hash].worker.js"});return n(e,r),e}},276:function(e,t,a){"use strict";a.r(t);var n=a(65),r=a.n(n),i=a(16),l=a(36),c=a(20),o=a(0),u=a.n(o),m=a(198),s=a(15),d=a(233),h=a(252),g=a(236),v=a(235),E=a(146),p=a(244),f=a(243),b=a(246),y=a(277),S=a(96),w=a(21),x=a(45),j=a(115),k=a(69),O=a(255),R=a(257),C=a(256),L=a(269),P=a(270),q=a(271),A=a(272),T=a(273),z=a(267),B=a(253),N=["blueGrey","red","brown","grey","common"],_=Object.entries(z).filter((function(e){var t=Object(l.a)(e,1)[0];return!N.includes(t)})).map((function(e){return Object(l.a)(e,2)[1]})),D=B.a[200];function F(e){var t=_[e-1];return{fill:t[200],text:t[900],stroke:"#444444"}}var I=a(262),K=a.n(I),G=a(35);function H(e){var t=e.parts;return u.a.createElement(L.a,{size:"small"},u.a.createElement(P.a,null,u.a.createElement(q.a,null,u.a.createElement(A.a,null,"Part"),u.a.createElement(A.a,null,"Dimensions"),u.a.createElement(A.a,null,"Quantity"))),u.a.createElement(T.a,null,t.map((function(e){return u.a.createElement(q.a,{key:e.id,"data-testid":"part-row"},u.a.createElement(A.a,null,u.a.createElement(G.e,null,u.a.createElement(K.a,{htmlColor:F(e.id).fill}),u.a.createElement("span",null,e.name))),u.a.createElement(A.a,null,e.dimensions.width," x ",e.dimensions.height),u.a.createElement(A.a,null,e.quantity))}))))}var M=a(4),J=a.n(M),W="Arial",Q=1e3,U=function(e){var t="http://www.w3.org/2000/svg",a=document.createElementNS(t,"text"),n=document.createElementNS(t,"svg");document.querySelector("body").append(n),a.setAttributeNS(null,"font-family",W),a.setAttributeNS(null,"font-size",Q);var r=document.createTextNode(e);a.appendChild(r),n.appendChild(a);var i=a.getBBox();return a.remove(),n.remove(),{width:i.width+4,height:i.height+4}};function V(e){var t=e.part,a=F(t.item.id);return u.a.createElement("g",null,u.a.createElement("rect",{fill:a.fill,x:t.x,y:t.y,stroke:a.stroke,width:t.width,height:t.height}),u.a.createElement("text",Object.assign({},function(e){var t=[],a={x:e.x+e.width/2,y:e.y+e.height/2,transform:null},n=U(e.item.name),r=function(e){var n=(1-e)*a.x,r=(1-e)*a.y;t.push("translate(".concat(n,", ").concat(r,")")),t.push("scale(".concat(e,")"))},i=function(e,t){return(e-t)/e},l=Math.max(i(n.width,e.width),i(n.height,e.height)),c=Math.max(i(n.width,e.height),i(n.height,e.width));return c<l?(t.push("rotate(-90, ".concat(a.x,", ").concat(a.y,")")),r(1-c)):r(1-l),t.length&&(a.transform=t.join(" ")),a}(t),{dominantBaseline:"middle",textAnchor:"middle",fontFamily:W,fontSize:Q,fill:a.text}),t.item.name))}J.a.shape({x:J.a.number.isRequired,y:J.a.number.isRequired,width:J.a.number.isRequired,height:J.a.number.isRequired,item:J.a.shape({name:J.a.string.isRequired,id:J.a.number.isRequired}).isRequired}).isRequired;function X(e){var t=e.bins,a=e.width,n=e.height;return u.a.createElement(u.a.Fragment,null,t.map((function(e,t){return u.a.createElement(h.a,{key:t,item:!0,xs:12},u.a.createElement("svg",{width:"100%",viewBox:"0 0 ".concat(a," ").concat(n)},u.a.createElement("rect",{width:a,height:n,fill:D}),e.map((function(e){return u.a.createElement(V,{key:"".concat(e.item.id,"-").concat(e.item.instanceNumber),part:e})}))))})))}function Y(){var e=Object(c.a)(["\n  margin-top: 10px;\n"]);return Y=function(){return e},e}var Z=Object(w.b)(k.a)(Y());function $(e){var t=e.material;return u.a.createElement(O.a,null,u.a.createElement(R.a,{title:t.name,subheader:"".concat(t.bins.length," needed")}),u.a.createElement(C.a,null,u.a.createElement(k.a,{variant:"h6"},"Parts Summary"),u.a.createElement(H,{parts:t.parts}),u.a.createElement(Z,{variant:"h6"},"Parts Layout"),u.a.createElement(X,{width:t.width,height:t.height,bins:t.bins,name:t.name})))}var ee=a(263),te=a.n(ee),ae=a(265),ne=a.n(ae),re=a(266),ie=a.n(re),le=a(48),ce=a(113),oe=a(114);function ue(){var e=Object(c.a)(["\n  width: 50px;\n  margin-left: 20px;\n  margin-right: 10px;\n"]);return ue=function(){return e},e}var me=Object(w.b)(ce.c)(ue());function se(e){var t=e.onChange,a=e.value;return u.a.createElement(le.d,{initialValues:{value:a},onSubmit:function(e,a){var n=a.setSubmitting;t(e.value),n(!1)}},(function(e){var t=e.isSubmitting;return u.a.createElement(le.c,null,u.a.createElement(ce.h,null,u.a.createElement(me,{showHelperText:!1,margin:"dense",name:"value",variant:"standard",label:"Kerf"}),u.a.createElement(ce.g,{disabled:t,type:"submit"},"Update ",u.a.createElement(m.a,{xsDown:!0},"Kerf"))))}))}t.default=function(e){var t=e.headerRef,a=Object(S.b)(),n=a.state,c=a.setKerf,w=a.setRotation,k=a.setSelectionStrategy,O=a.setSplitStrategy,R=a.setSortStrategy,C=Object(o.useState)(null),L=Object(l.a)(C,2),P=L[0],q=L[1],A=Object(S.a)(),T=A.pageview,z=A.event,B=Object(oe.useSnackbar)().enqueueSnackbar,N=Object(s.a)(),_=Object(d.a)(N.breakpoints.up("sm"));return Object(o.useEffect)((function(){0===n.materials.length?Object(x.c)("/"):T("/layout")}),[n.materials,T]),Object(o.useEffect)((function(){var e=1e3*Object(j.a)(n.kerfSize),t=function(e){return Math.ceil(1e3*Object(j.a)(e))},a=""===n.selectionStrategy?void 0:n.selectionStrategy,l=""===n.splitStrategy?void 0:n.splitStrategy,c=""===n.sortStrategy?void 0:n.sortStrategy;Promise.all(n.materials.map((function(o){var u,m;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return u=te()(),m=Object(i.a)({},o,{width:t(o.dimensions.width),height:t(o.dimensions.height),convertedParts:o.parts.reduce((function(e,a){for(var n={name:a.name,id:a.id,dimensions:a.dimensions,height:t(a.dimensions.height),width:t(a.dimensions.width)},r=0;r<a.quantity;r++)e.push(Object(i.a)({},n,{instanceNumber:r+1}));return e}),[])}),s.next=4,r.a.awrap(u.pack({binHeight:m.height,binWidth:m.width,items:m.convertedParts},{kerfSize:e,allowRotation:n.allowRotation,selectionStrategy:a,splitStrategy:l,sortStrategy:c}));case 4:return m.bins=s.sent,s.abrupt("return",m);case 6:case"end":return s.stop()}}))}))).then((function(e){z({category:"Layout",action:"Layout Generated"}),q(e)}))}),[n.materials,z,n.kerfSize,n.allowRotation,n.selectionStrategy,n.splitStrategy,n.sortStrategy]),u.a.createElement(h.a,{container:!0,spacing:3},u.a.createElement(g.a,{container:t.current},u.a.createElement(v.a,{in:!0},u.a.createElement(ce.f,{to:"/"},u.a.createElement(E.a,{size:"small",variant:"contained"},u.a.createElement(ne.a,null),"Parts ",u.a.createElement(m.a,{xsDown:!0},"Configuration"))))),P?u.a.createElement(u.a.Fragment,null,u.a.createElement(h.a,{item:!0,xs:12},u.a.createElement(ce.a,null,u.a.createElement(ce.e,{onClick:function(){return window.print()}},u.a.createElement(ie.a,null),u.a.createElement(m.a,{smDown:!0},"\xa0Print")),u.a.createElement(se,{onChange:function(e){c(e),B("Kerf updated",{variant:"success"}),z({category:"Layout",action:"Kerf Changed"})},value:n.kerfSize}),"\xa0",u.a.createElement(p.a,{control:u.a.createElement(f.a,{checked:n.allowRotation,onChange:function(e){w(Boolean(e.target.checked))},value:"allowRotation",color:"primary"}),labelPlacement:"top",label:"".concat(_?"Allow ":"","Rotation?")}),u.a.createElement(p.a,{control:u.a.createElement(b.a,{value:n.selectionStrategy,onChange:function(e){return t=e.target.value,k(null!==t&&void 0!==t?t:void 0),B("Selection strategy updated",{variant:"success"}),void z({category:"Layout",action:"Selection strategy Changed"});var t}},u.a.createElement(y.a,{value:""},"-"),u.a.createElement(y.a,{value:0},"BEST_SHORT_SIDE_FIT"),u.a.createElement(y.a,{value:1},"BEST_LONG_SIDE_FIT"),u.a.createElement(y.a,{value:2},"BEST_AREA_FIT")),labelPlacement:"top",label:"Selection Strategy"}),u.a.createElement(p.a,{control:u.a.createElement(b.a,{value:n.splitStrategy,onChange:function(e){return t=e.target.value,O(t),B("Split strategy updated",{variant:"success"}),void z({category:"Layout",action:"Split strategy Changed"});var t}},u.a.createElement(y.a,{value:""},"-"),u.a.createElement(y.a,{value:0},"LongLeftoverAxisSplit"),u.a.createElement(y.a,{value:1},"ShortLeftoverAxisSplit"),u.a.createElement(y.a,{value:2},"LongAxisSplit"),u.a.createElement(y.a,{value:3},"ShortAxisSplit")),labelPlacement:"top",label:"Split Strategy"}),u.a.createElement(p.a,{control:u.a.createElement(b.a,{value:n.sortStrategy,onChange:function(e){return t=e.target.value,R(t),B("Sort strategy updated",{variant:"success"}),void z({category:"Layout",action:"Sort strategy Changed"});var t}},u.a.createElement(y.a,{value:""},"-"),u.a.createElement(y.a,{value:0},"Area"),u.a.createElement(y.a,{value:1},"ShortSide"),u.a.createElement(y.a,{value:2},"LongSide"),u.a.createElement(y.a,{value:3},"Perimeter"),u.a.createElement(y.a,{value:4},"Differences"),u.a.createElement(y.a,{value:5},"Ratio")),labelPlacement:"top",label:"Sort Strategy"}))),P.map((function(e){return u.a.createElement(h.a,{key:e.id,item:!0,xs:12,lg:6},u.a.createElement($,{material:e}))}))):u.a.createElement(h.a,{item:!0,xs:12},u.a.createElement(ce.d,{message:"Calculating layouts"})))}}}]);
//# sourceMappingURL=6.d929c44c.chunk.js.map